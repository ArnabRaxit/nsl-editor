<div id="search-history-inner" class="">


<br>
<% excc = %Q(<span class="purple" title="Excluding common and cultivar names by default.">EXCC</span>) %>
<% incc = %Q(<span class="purple" title="Including common and cultivar names.">INCC</span>) %>
<% if session[:searches].present? %>
  <h4 class="">Recent searches</h4>
<% else %>
  <h4 class="">No Recent searches</h4>
<% end %>

<table class="search-history table table-striped">
<% if session[:searches].present? %>
  <tr>
    <th>Query</th>
    <th>Summary Results</th>
    <th>Time</th>
  </tr>
<% session[:searches].reverse.try('each') do |search| %>
  <tr>
    <td>
      <%= link_to("#{search['query_string']}", new_search_path(query_string: search["query_string"]), class: 'blue', title: 'Recent query') %>
    </td>
    <td>
      <% if search["error"] == true %>
        Error: <%= search["error_message"] %>
      <% else %>
        <%= search["result_size"] %>
      <% end %>
    </td>
    <td>
      <%= search["time_stamp"].to_time.to_formatted_s(:short) %>
      (<%= time_ago_in_words(search["time_stamp"].to_time) %> ago)
    </td>
  </tr>
  <% end %>
  <% end %>
</table>

</div>
