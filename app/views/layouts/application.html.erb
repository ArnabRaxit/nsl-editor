<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title><%= 'Test' if Rails.configuration.session_key_tag.match(/test/i) %> NSL Editor</title>

    <script>
      window.relative_url_root = "<%= Rails.application.config.relative_url_root %>"
      window.NG_TEMPLATE_URL="<%= @ng_template_path %>";
    </script>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => false %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => false %>
    <%= csrf_meta_tags %>
    <%= favicon_link_tag 'favicon.png?v=1', :rel => 'shortcut icon' %>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <script>
      var authorQueryOptions = <%= Author::AsQuery.options.to_json.html_safe %>;
      var instanceQueryOptions = <%= Instance::AsQuery.options.to_json.html_safe %>;
      var nameQueryOptions = <%= Name::AsQuery.options.to_json.html_safe %>;
      var referenceQueryOptions = <%= Reference::AsQuery.options.to_json.html_safe %>;
      var treeQueryOptions = <%= Tree.query_options.to_json.html_safe %>;
    </script>
    <% if Rails.configuration.try('display_as_test') == true %>
      <style>
        div#big-navbar { background: #663399; }
        div#first-navbar { background: #663399; }
        ul.navbar-nav li.dropdown { background: #663399; }
        ul.navbar-nav li a.dropdown-toggle { background: #663399; }
        div#searchbar { background: #663399; }
        div#search-summary { background: #663399; }
      </style>
    <% end %>
    <%= render partial: 'search/advanced_style' %>
  </head>
 
  <body
      data-active-reference-tab="tab_show_1"
      data-active-name-tab="tab_details"
      data-active-author-tab="tab_show_1"
      data-active-instance-tab="tab_show_1">

    <div id="screen-too-small-msg">Sorry.... your window is too small to show the editor.  It needs to be wider.</div>
    <div id="big-navbar" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="row">
          <div id="first-navbar" class="no-left-padding navbar-header col-sm-12 col-md-12">
            <% if @no_navigation %>
              <%= render 'layouts/no_navigation' %>
            <% else %>
              <%= render 'layouts/navigation' %>
            <% end %>
          </div>
        </div>
        <div id="searchbar-row" class="row">
          <div id="searchbar" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <%= render 'layouts/new_search_form' unless @no_searchbar %>
          </div>
        </div>
        <% if @system_broadcast.present? %> 
          <div id="broadcast" class="">
            <%= @system_broadcast.html_safe %>
          </div>
       <% elsif flash.present? %>
          <div id="flash" class="">
            <% flash.each do | key, value | %>
              <%= value %>
            <% end %>
          </div>
       <% end %>
       <div id="search-summary-row" class="row">
         <div id="search-summary" class="no-left-padding col-sm-12 col-md-12 col-lg-12">
           <%= yield :search_result_summary %>
         </div>
       </div>
      </div>
    </div>

    <div id="main-content" class="container-fluid">
    <% if @no_search_result_details %>
      <div id="search-result-details" class="hidden" > </div>
    <% else %>
      <div id="search-result-details" > </div>
    <% end %>
      <div class="row">
        <div id="search-result-container" class="no-left-padding col-xs-12 col-sm-12 col-md-12 col-lg-12 sidebar">
          <%= yield %>
        </div>
      </div>
    </div>

    <div id="footer" class="footer">
      <div class="container-fluid">
        <%= render partial: 'layouts/footer' %>
      </div>
    </div>
    <%= render partial: 'new_instance_form' %>
    <div id="message-container" class="popup hidden"></div>
    <div id="author-query-options-storage" class="hidden">
        <%= render partial: 'authors/query_dropdown_links' %>
    </div>
    <div id="instance-query-options-storage" class="hidden">
        <%= render partial: 'instances/query_dropdown_links' %>
    </div>
    <div id="name-query-options-storage" class="hidden">
        <%= render partial: 'names/query_dropdown_links' %>
    </div>
    <div id="reference-query-options-storage" class="hidden">
      <%= render partial: 'references/query_dropdown_links' %>
    </div>
    <script type="text/javascript" src="https://www.anbg.gov.au/25jira/s/d41d8cd98f00b204e9800998ecf8427e/en-p174ip-1988229788/6265/3/1.4.7/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=ff55c94b"></script>
    <%= render partial: 'search/advanced' %>
    <%= render partial: 'search/advanced_script' %>
 </body>
</html>
 
