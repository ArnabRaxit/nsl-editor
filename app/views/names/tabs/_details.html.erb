
<span class="full-name" title="Full name"><%= "#{@name.full_name}" %></span>
<br>
<%= "<span class='name-status' title='status'>#{@name.name_status.try('name').try('capitalize')}</span>".html_safe %>
<%= "<span class='name-type' title='type'> #{@name.name_type.try('name')}</span>".html_safe %>
<%= "<span class='name-rank' title='rank'>#{@name.name_rank.try('name').try('downcase')}</span> name ".html_safe %>
<% if @name.has_parent? %>
    <% if @name.has_second_parent? %>
      between
    <% else %>
      within
    <% end %>
    <%= link_to(@name.parent.try('full_name_html').try('html_safe'), search_path(query_on: 'name', query_field: 'id', query: @name.parent_id),title: 'parent') %>
<% end %>

<% if @name.has_second_parent? %>
    and
<%= link_to(@name.second_parent.try('full_name_html').try('html_safe'), search_path(query_on: 'name', query_field: 'id', query: @name.second_parent_id),title: 'second parent') %>
<% end %>

<% if @name.name_type.scientific? %>
  <br>
  <% apni_tree = @name.apni? %>
  <%= case apni_tree
       when 'unknown'
         'APNI: status unknown.'
       when true
         "APNI family: #{@name.apni_family_name}."
       else
         'Not in the APNI tree.'
       end
   %>
<% end %>

<% if @name.duplicate_of_id.present? %>
  <br>
  <% link = link_to(@name.duplicate_of.full_name, search_path(query_on: 'name', query_field: 'id', query: @name.duplicate_of_id)) %>
  <%= "Duplicate of #{link}".html_safe %>
  <br>
<% end %>

<% unless @name.ex_base_author.blank? %>
  <br>
  <% auth_link = link_to(@name.ex_base_author.abbrev_if_possible, search_path(query_on: 'author', query_field: 'id', query:  @name.ex_base_author_id)) %>
  <%= "Ex Base Authored by #{auth_link}".html_safe  %>
<% end %>

<% unless @name.base_author.blank? %>
    <br>
    <% auth_link = link_to(@name.base_author.abbrev_if_possible, search_path(query_on: 'author', query_field: 'id', query: @name.base_author_id)) %>
    <%= "Base Authored by #{auth_link}".html_safe  %>
<% end %>

<% unless @name.ex_author.blank? %>
    <br>
    <% auth_link = link_to(@name.ex_author.abbrev_if_possible, search_path(query_on: 'author', query_field: 'id', query: @name.ex_author_id)) %>
    <%= "Ex Authored by #{auth_link}".html_safe  %>
<% end %>

<% unless @name.author.blank? %>
    <br>
    <% auth_link = link_to(@name.author.abbrev_if_possible, search_path(query_on: 'author', query_field: 'id', query: @name.author_id)) %>
    <%= "Authored by #{auth_link}".html_safe  %>
<% end %>
<% unless @name.sanctioning_author.blank? %>
    <br>
    <% auth_link = link_to(@name.sanctioning_author.abbrev_if_possible, search_path(query_on: 'author', query_field: 'id', query: @name.sanctioning_author_id)) %>
    <%= "Sanctioned by #{auth_link}".html_safe  %>
<% end %>
